{"ast":null,"code":"import { EmployeeRole } from 'src/common/enums/employee-role.enum';\nimport { loadingGifUrl } from './../../../../../../washer-backend-nest/src/common/constants';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"src/app/services/auth.service\";\nimport * as i2 from \"src/app/services/alert.service\";\nimport * as i3 from \"src/app/services/employees.service\";\nimport * as i4 from \"src/app/services/branches.service\";\nimport * as i5 from \"@angular/common\";\nimport * as i6 from \"@angular/forms\";\n\nfunction NewEmployeeModalComponent_div_18_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r4 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"div\", 8)(1, \"select\", 17);\n    i0.ɵɵlistener(\"ngModelChange\", function NewEmployeeModalComponent_div_18_Template_select_ngModelChange_1_listener($event) {\n      i0.ɵɵrestoreView(_r4);\n      const ctx_r3 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r3.employee.role = $event);\n    });\n    i0.ɵɵelementStart(2, \"option\", 18);\n    i0.ɵɵtext(3);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(4, \"option\", 18);\n    i0.ɵɵtext(5);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(6, \"option\", 18);\n    i0.ɵɵtext(7);\n    i0.ɵɵelementEnd()()();\n  }\n\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngModel\", ctx_r0.employee.role);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"value\", ctx_r0.EmployeeRole.ADMIN);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(ctx_r0.EmployeeRole.ADMIN);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"value\", ctx_r0.EmployeeRole.BRANCH_EMPLOYEE);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(ctx_r0.EmployeeRole.BRANCH_EMPLOYEE);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"value\", ctx_r0.EmployeeRole.DRIVER);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(ctx_r0.EmployeeRole.DRIVER);\n  }\n}\n\nfunction NewEmployeeModalComponent_span_21_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"span\", 19);\n    i0.ɵɵtext(1, \"Add Employee\");\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction NewEmployeeModalComponent_img_22_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"img\", 20);\n  }\n\n  if (rf & 2) {\n    const ctx_r2 = i0.ɵɵnextContext();\n    i0.ɵɵpropertyInterpolate(\"src\", ctx_r2.loadingGif, i0.ɵɵsanitizeUrl);\n  }\n}\n\nexport let NewEmployeeModalComponent = /*#__PURE__*/(() => {\n  class NewEmployeeModalComponent {\n    constructor(authService, alertService, employeesService, branchesService) {\n      this.authService = authService;\n      this.alertService = alertService;\n      this.employeesService = employeesService;\n      this.branchesService = branchesService;\n      this.employee = {\n        first_name: null,\n        last_name: null,\n        password: null,\n        role: EmployeeRole.DRIVER,\n        username: null,\n        email: null,\n        phoneNumber: null,\n        branchId: null\n      };\n      this.isStoreLoading = false;\n      this.loadingGif = loadingGifUrl;\n      this.EmployeeRole = EmployeeRole;\n      this.currentEmployee = authService.currentEmployee;\n    }\n\n    store() {\n      this.isStoreLoading = true;\n\n      if (!this.employee.first_name || !this.employee.first_name) {\n        this.alertService.toastError('Employee name should not be empty');\n        this.isStoreLoading = false;\n        return;\n      }\n\n      if (!this.employee.username) {\n        this.alertService.toastError('Employee username should not be empty');\n        this.isStoreLoading = false;\n        return;\n      }\n\n      if (!this.employee.password) {\n        this.alertService.toastError('Employee password should not be empty');\n        this.isStoreLoading = false;\n        return;\n      }\n\n      if (!this.employee.phoneNumber) {\n        this.alertService.toastError('Employee phone number should not be empty');\n        this.isStoreLoading = false;\n        return;\n      }\n\n      if (!this.employee.role) {\n        this.alertService.toastError('Employee role should not be empty');\n        this.isStoreLoading = false;\n        return;\n      }\n\n      if (!this.employee.branchId) {\n        this.alertService.toastError('Branch should be selected');\n        this.isStoreLoading = false;\n        return;\n      }\n\n      this.employeesService.store(this.employee).subscribe({\n        next: data => {\n          console.log(data);\n          this.alertService.toastSuccess('Employee Added Successfully');\n          this.isStoreLoading = false;\n        },\n        error: error => {\n          console.log(error);\n          this.authService.handleHttpError(error);\n          this.isStoreLoading = false;\n        }\n      });\n    }\n\n  }\n\n  NewEmployeeModalComponent.ɵfac = function NewEmployeeModalComponent_Factory(t) {\n    return new (t || NewEmployeeModalComponent)(i0.ɵɵdirectiveInject(i1.AuthService), i0.ɵɵdirectiveInject(i2.AlertService), i0.ɵɵdirectiveInject(i3.EmployeesService), i0.ɵɵdirectiveInject(i4.BranchesService));\n  };\n\n  NewEmployeeModalComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: NewEmployeeModalComponent,\n    selectors: [[\"app-new-employee-modal\"]],\n    decls: 23,\n    vars: 10,\n    consts: [[1, \"card\", \"card-signin\", \"my-5\", 2, \"border\", \"0\", \"margin\", \"0!important\"], [1, \"card-body\"], [\"translate\", \"\", 1, \"card-title\", \"text-center\"], [1, \"form-signin\", 3, \"ngSubmit\"], [1, \"form-label-group\", \"m-4\", \"row\"], [1, \"col-sm-5\"], [\"type\", \"text\", \"name\", \"name\", \"id\", \"name\", \"placeholder\", \"First Name\", \"required\", \"\", \"autofocus\", \"\", 1, \"form-control\", \"common-input\", \"px-3\", 3, \"ngModel\", \"ngModelChange\"], [\"type\", \"text\", \"name\", \"name\", \"id\", \"name\", \"placeholder\", \"Last Name\", \"required\", \"\", \"autofocus\", \"\", 1, \"form-control\", \"common-input\", \"px-3\", 3, \"ngModel\", \"ngModelChange\"], [1, \"form-label-group\", \"m-4\"], [\"type\", \"text\", \"name\", \"username\", \"id\", \"username\", \"placeholder\", \"Username\", \"required\", \"\", \"autofocus\", \"\", 1, \"form-control\", \"common-input\", \"px-3\", 3, \"ngModel\", \"ngModelChange\"], [\"type\", \"email\", \"name\", \"email\", \"id\", \"email\", \"placeholder\", \"Email\", \"required\", \"\", \"autofocus\", \"\", 1, \"form-control\", \"common-input\", \"px-3\", 3, \"ngModel\", \"ngModelChange\"], [\"type\", \"text\", \"name\", \"mobile\", \"id\", \"mobile\", \"placeholder\", \"Phone Number\", \"required\", \"\", \"autofocus\", \"\", 1, \"form-control\", \"common-input\", \"px-3\", 3, \"ngModel\", \"ngModelChange\"], [\"type\", \"text\", \"name\", \"password\", \"id\", \"password\", \"placeholder\", \"Password\", \"required\", \"\", \"autofocus\", \"\", 1, \"form-control\", \"common-input\", \"px-3\", 3, \"ngModel\", \"ngModelChange\"], [\"class\", \"form-label-group m-4\", 4, \"ngIf\"], [1, \"btn\", \"btn-lg\", \"btn-primary\", \"btn-block\", \"form-control\", \"text-uppercase\", 3, \"disabled\"], [\"translate\", \"\", 4, \"ngIf\"], [\"width\", \"20px\", 3, \"src\", 4, \"ngIf\"], [\"name\", \"role\", 1, \"form-control\", 3, \"ngModel\", \"ngModelChange\"], [3, \"value\"], [\"translate\", \"\"], [\"width\", \"20px\", 3, \"src\"]],\n    template: function NewEmployeeModalComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelementStart(0, \"div\", 0)(1, \"div\", 1)(2, \"h2\", 2);\n        i0.ɵɵtext(3, \"Add a new Employee\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(4, \"form\", 3);\n        i0.ɵɵlistener(\"ngSubmit\", function NewEmployeeModalComponent_Template_form_ngSubmit_4_listener() {\n          return ctx.store();\n        });\n        i0.ɵɵelementStart(5, \"div\", 4)(6, \"div\", 5)(7, \"input\", 6);\n        i0.ɵɵlistener(\"ngModelChange\", function NewEmployeeModalComponent_Template_input_ngModelChange_7_listener($event) {\n          return ctx.employee.first_name = $event;\n        });\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(8, \"div\", 5)(9, \"input\", 7);\n        i0.ɵɵlistener(\"ngModelChange\", function NewEmployeeModalComponent_Template_input_ngModelChange_9_listener($event) {\n          return ctx.employee.last_name = $event;\n        });\n        i0.ɵɵelementEnd()()();\n        i0.ɵɵelementStart(10, \"div\", 8)(11, \"input\", 9);\n        i0.ɵɵlistener(\"ngModelChange\", function NewEmployeeModalComponent_Template_input_ngModelChange_11_listener($event) {\n          return ctx.employee.username = $event;\n        });\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(12, \"div\", 8)(13, \"input\", 10);\n        i0.ɵɵlistener(\"ngModelChange\", function NewEmployeeModalComponent_Template_input_ngModelChange_13_listener($event) {\n          return ctx.employee.email = $event;\n        });\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(14, \"div\", 8)(15, \"input\", 11);\n        i0.ɵɵlistener(\"ngModelChange\", function NewEmployeeModalComponent_Template_input_ngModelChange_15_listener($event) {\n          return ctx.employee.phoneNumber = $event;\n        });\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(16, \"div\", 8)(17, \"input\", 12);\n        i0.ɵɵlistener(\"ngModelChange\", function NewEmployeeModalComponent_Template_input_ngModelChange_17_listener($event) {\n          return ctx.employee.password = $event;\n        });\n        i0.ɵɵelementEnd()();\n        i0.ɵɵtemplate(18, NewEmployeeModalComponent_div_18_Template, 8, 7, \"div\", 13);\n        i0.ɵɵelementStart(19, \"div\", 8)(20, \"button\", 14);\n        i0.ɵɵtemplate(21, NewEmployeeModalComponent_span_21_Template, 2, 0, \"span\", 15);\n        i0.ɵɵtemplate(22, NewEmployeeModalComponent_img_22_Template, 1, 1, \"img\", 16);\n        i0.ɵɵelementEnd()()()()();\n      }\n\n      if (rf & 2) {\n        i0.ɵɵadvance(7);\n        i0.ɵɵproperty(\"ngModel\", ctx.employee.first_name);\n        i0.ɵɵadvance(2);\n        i0.ɵɵproperty(\"ngModel\", ctx.employee.last_name);\n        i0.ɵɵadvance(2);\n        i0.ɵɵproperty(\"ngModel\", ctx.employee.username);\n        i0.ɵɵadvance(2);\n        i0.ɵɵproperty(\"ngModel\", ctx.employee.email);\n        i0.ɵɵadvance(2);\n        i0.ɵɵproperty(\"ngModel\", ctx.employee.phoneNumber);\n        i0.ɵɵadvance(2);\n        i0.ɵɵproperty(\"ngModel\", ctx.employee.password);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngIf\", ctx.EmployeeRole.ADMIN == ctx.currentEmployee.role);\n        i0.ɵɵadvance(2);\n        i0.ɵɵproperty(\"disabled\", ctx.isStoreLoading);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngIf\", !ctx.isStoreLoading);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngIf\", ctx.isStoreLoading);\n      }\n    },\n    dependencies: [i5.NgIf, i6.ɵNgNoValidate, i6.NgSelectOption, i6.ɵNgSelectMultipleOption, i6.DefaultValueAccessor, i6.SelectControlValueAccessor, i6.NgControlStatus, i6.NgControlStatusGroup, i6.RequiredValidator, i6.NgModel, i6.NgForm]\n  });\n  return NewEmployeeModalComponent;\n})();","map":null,"metadata":{},"sourceType":"module"}