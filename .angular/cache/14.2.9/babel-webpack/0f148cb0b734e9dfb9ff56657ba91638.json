{"ast":null,"code":"import { __awaiter } from \"tslib\";\nimport { EmployeeRole } from 'src/common/enums/employee-role.enum';\nimport { loadingGifUrl } from './../../../../../../washer-backend-nest/src/common/constants';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"src/app/services/auth.service\";\nimport * as i2 from \"src/app/services/alert.service\";\nimport * as i3 from \"src/app/services/employees.service\";\nimport * as i4 from \"src/app/services/branches.service\";\nimport * as i5 from \"@angular/common\";\nimport * as i6 from \"@angular/forms\";\n\nfunction NewEmployeeModalComponent_div_30_option_4_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"option\", 19);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r4 = i0.ɵɵnextContext(2);\n    i0.ɵɵproperty(\"value\", ctx_r4.EmployeeRole.ADMIN);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(ctx_r4.EmployeeRole.ADMIN);\n  }\n}\n\nfunction NewEmployeeModalComponent_div_30_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r6 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"div\", 8)(1, \"label\");\n    i0.ɵɵtext(2, \"Role:\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"select\", 17);\n    i0.ɵɵlistener(\"ngModelChange\", function NewEmployeeModalComponent_div_30_Template_select_ngModelChange_3_listener($event) {\n      i0.ɵɵrestoreView(_r6);\n      const ctx_r5 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r5.employee.role = $event);\n    });\n    i0.ɵɵtemplate(4, NewEmployeeModalComponent_div_30_option_4_Template, 2, 2, \"option\", 18);\n    i0.ɵɵelementStart(5, \"option\", 19);\n    i0.ɵɵtext(6);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(7, \"option\", 20);\n    i0.ɵɵtext(8);\n    i0.ɵɵelementEnd()()();\n  }\n\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(3);\n    i0.ɵɵproperty(\"ngModel\", ctx_r0.employee.role);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r0.EmployeeRole.ADMIN == ctx_r0.currentEmployee.role);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"value\", ctx_r0.EmployeeRole.BRANCH_EMPLOYEE);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(ctx_r0.EmployeeRole.BRANCH_EMPLOYEE);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"value\", ctx_r0.EmployeeRole.DRIVER);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(ctx_r0.EmployeeRole.DRIVER);\n  }\n}\n\nfunction NewEmployeeModalComponent_div_31_option_4_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"option\", 19);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const branch_r8 = ctx.$implicit;\n    i0.ɵɵproperty(\"value\", branch_r8.id);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(branch_r8.description);\n  }\n}\n\nfunction NewEmployeeModalComponent_div_31_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r10 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"div\", 8)(1, \"label\");\n    i0.ɵɵtext(2, \"Branch:\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"select\", 17);\n    i0.ɵɵlistener(\"ngModelChange\", function NewEmployeeModalComponent_div_31_Template_select_ngModelChange_3_listener($event) {\n      i0.ɵɵrestoreView(_r10);\n      const ctx_r9 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r9.employee.branchId = $event);\n    });\n    i0.ɵɵtemplate(4, NewEmployeeModalComponent_div_31_option_4_Template, 2, 2, \"option\", 21);\n    i0.ɵɵelementEnd()();\n  }\n\n  if (rf & 2) {\n    const ctx_r1 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(3);\n    i0.ɵɵproperty(\"ngModel\", ctx_r1.employee.branchId);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r1.branches);\n  }\n}\n\nfunction NewEmployeeModalComponent_span_34_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"span\", 22);\n    i0.ɵɵtext(1, \"Add Employee\");\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction NewEmployeeModalComponent_img_35_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"img\", 23);\n  }\n\n  if (rf & 2) {\n    const ctx_r3 = i0.ɵɵnextContext();\n    i0.ɵɵpropertyInterpolate(\"src\", ctx_r3.loadingGif, i0.ɵɵsanitizeUrl);\n  }\n}\n\nconst _c0 = function (a0, a1) {\n  return [a0, a1];\n};\n\nexport let NewEmployeeModalComponent = /*#__PURE__*/(() => {\n  class NewEmployeeModalComponent {\n    constructor(authService, alertService, employeesService, branchesService) {\n      this.authService = authService;\n      this.alertService = alertService;\n      this.employeesService = employeesService;\n      this.branchesService = branchesService;\n      this.employee = {\n        firstName: null,\n        lastName: null,\n        password: null,\n        role: null,\n        username: null,\n        email: null,\n        phoneNumber: null,\n        branchId: null\n      };\n      this.branches = [];\n      this.isStoreLoading = false;\n      this.loadingGif = loadingGifUrl;\n      this.EmployeeRole = EmployeeRole;\n      this.currentEmployee = authService.currentEmployee;\n    }\n\n    ngOnInit() {\n      return __awaiter(this, void 0, void 0, function* () {\n        try {\n          let res = yield this.branchesService.getAll();\n          this.branches = res.data;\n          this.count = res.count;\n        } catch (err) {\n          this.authService.handleHttpError(err);\n        }\n      });\n    }\n\n    store() {\n      this.isStoreLoading = true;\n\n      if (!this.employee.firstName || !this.employee.firstName) {\n        this.alertService.toastError('Employee name should not be empty');\n        this.isStoreLoading = false;\n        return;\n      }\n\n      if (!this.employee.username) {\n        this.alertService.toastError('Employee username should not be empty');\n        this.isStoreLoading = false;\n        return;\n      }\n\n      if (!this.employee.password) {\n        this.alertService.toastError('Employee password should not be empty');\n        this.isStoreLoading = false;\n        return;\n      }\n\n      if (!this.employee.phoneNumber) {\n        this.alertService.toastError('Employee phone number should not be empty');\n        this.isStoreLoading = false;\n        return;\n      }\n\n      if (!this.employee.role) {\n        this.alertService.toastError('Employee role should not be empty');\n        this.isStoreLoading = false;\n        return;\n      }\n\n      if (!this.employee.branchId) {\n        this.alertService.toastError('Branch should be selected');\n        this.isStoreLoading = false;\n        return;\n      }\n\n      this.employeesService.store(this.employee).subscribe({\n        next: data => {\n          console.log(data);\n          this.alertService.toastSuccess('Employee Added Successfully');\n          this.isStoreLoading = false;\n        },\n        error: error => {\n          console.log(error);\n          this.authService.handleHttpError(error);\n          this.isStoreLoading = false;\n        }\n      });\n    }\n\n  }\n\n  NewEmployeeModalComponent.ɵfac = function NewEmployeeModalComponent_Factory(t) {\n    return new (t || NewEmployeeModalComponent)(i0.ɵɵdirectiveInject(i1.AuthService), i0.ɵɵdirectiveInject(i2.AlertService), i0.ɵɵdirectiveInject(i3.EmployeesService), i0.ɵɵdirectiveInject(i4.BranchesService));\n  };\n\n  NewEmployeeModalComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: NewEmployeeModalComponent,\n    selectors: [[\"app-new-employee-modal\"]],\n    decls: 36,\n    vars: 17,\n    consts: [[1, \"card\", \"card-signin\", \"my-5\", 2, \"border\", \"0\", \"margin\", \"0!important\"], [1, \"card-body\"], [\"translate\", \"\", 1, \"card-title\", \"text-center\"], [1, \"form-signin\", 3, \"ngSubmit\"], [1, \"form-label-group\", \"m-2\", \"row\"], [1, \"col-sm-6\"], [\"type\", \"text\", \"name\", \"name\", \"id\", \"name\", \"placeholder\", \"First Name\", \"required\", \"\", \"autofocus\", \"\", 1, \"form-control\", \"common-input\", 3, \"ngModel\", \"ngModelChange\"], [\"type\", \"text\", \"name\", \"name\", \"id\", \"name\", \"placeholder\", \"Last Name\", \"required\", \"\", \"autofocus\", \"\", 1, \"form-control\", \"common-input\", 3, \"ngModel\", \"ngModelChange\"], [1, \"form-label-group\", \"m-4\"], [\"type\", \"text\", \"name\", \"username\", \"id\", \"username\", \"placeholder\", \"Username\", \"required\", \"\", \"autofocus\", \"\", 1, \"form-control\", \"common-input\", \"px-3\", 3, \"ngModel\", \"ngModelChange\"], [\"type\", \"email\", \"name\", \"email\", \"id\", \"email\", \"placeholder\", \"Email\", \"required\", \"\", \"autofocus\", \"\", 1, \"form-control\", \"common-input\", \"px-3\", 3, \"ngModel\", \"ngModelChange\"], [\"type\", \"text\", \"name\", \"mobile\", \"id\", \"mobile\", \"placeholder\", \"Phone Number\", \"required\", \"\", \"autofocus\", \"\", 1, \"form-control\", \"common-input\", \"px-3\", 3, \"ngModel\", \"ngModelChange\"], [\"type\", \"text\", \"name\", \"password\", \"id\", \"password\", \"placeholder\", \"Password\", \"required\", \"\", \"autofocus\", \"\", 1, \"form-control\", \"common-input\", \"px-3\", 3, \"ngModel\", \"ngModelChange\"], [\"class\", \"form-label-group m-4\", 4, \"ngIf\"], [1, \"btn\", \"btn-lg\", \"btn-primary\", \"btn-block\", \"form-control\", \"text-uppercase\", 3, \"disabled\"], [\"translate\", \"\", 4, \"ngIf\"], [\"width\", \"20px\", 3, \"src\", 4, \"ngIf\"], [\"name\", \"role\", 1, \"form-control\", 3, \"ngModel\", \"ngModelChange\"], [3, \"value\", 4, \"ngIf\"], [3, \"value\"], [\"selected\", \"selected\", 3, \"value\"], [3, \"value\", 4, \"ngFor\", \"ngForOf\"], [\"translate\", \"\"], [\"width\", \"20px\", 3, \"src\"]],\n    template: function NewEmployeeModalComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelementStart(0, \"div\", 0)(1, \"div\", 1)(2, \"h2\", 2);\n        i0.ɵɵtext(3, \"Add a new Employee\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(4, \"form\", 3);\n        i0.ɵɵlistener(\"ngSubmit\", function NewEmployeeModalComponent_Template_form_ngSubmit_4_listener() {\n          return ctx.store();\n        });\n        i0.ɵɵelementStart(5, \"div\", 4)(6, \"div\", 5)(7, \"label\");\n        i0.ɵɵtext(8, \"First Name:\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(9, \"input\", 6);\n        i0.ɵɵlistener(\"ngModelChange\", function NewEmployeeModalComponent_Template_input_ngModelChange_9_listener($event) {\n          return ctx.employee.firstName = $event;\n        });\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(10, \"div\", 5)(11, \"label\");\n        i0.ɵɵtext(12, \"Last Name:\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(13, \"input\", 7);\n        i0.ɵɵlistener(\"ngModelChange\", function NewEmployeeModalComponent_Template_input_ngModelChange_13_listener($event) {\n          return ctx.employee.lastName = $event;\n        });\n        i0.ɵɵelementEnd()()();\n        i0.ɵɵelementStart(14, \"div\", 8)(15, \"label\");\n        i0.ɵɵtext(16, \"UserName:\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(17, \"input\", 9);\n        i0.ɵɵlistener(\"ngModelChange\", function NewEmployeeModalComponent_Template_input_ngModelChange_17_listener($event) {\n          return ctx.employee.username = $event;\n        });\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(18, \"div\", 8)(19, \"label\");\n        i0.ɵɵtext(20, \"Email:\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(21, \"input\", 10);\n        i0.ɵɵlistener(\"ngModelChange\", function NewEmployeeModalComponent_Template_input_ngModelChange_21_listener($event) {\n          return ctx.employee.email = $event;\n        });\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(22, \"div\", 8)(23, \"label\");\n        i0.ɵɵtext(24, \"PhoneNumber:\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(25, \"input\", 11);\n        i0.ɵɵlistener(\"ngModelChange\", function NewEmployeeModalComponent_Template_input_ngModelChange_25_listener($event) {\n          return ctx.employee.phoneNumber = $event;\n        });\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(26, \"div\", 8)(27, \"label\");\n        i0.ɵɵtext(28, \"Password:\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(29, \"input\", 12);\n        i0.ɵɵlistener(\"ngModelChange\", function NewEmployeeModalComponent_Template_input_ngModelChange_29_listener($event) {\n          return ctx.employee.password = $event;\n        });\n        i0.ɵɵelementEnd()();\n        i0.ɵɵtemplate(30, NewEmployeeModalComponent_div_30_Template, 9, 6, \"div\", 13);\n        i0.ɵɵtemplate(31, NewEmployeeModalComponent_div_31_Template, 5, 2, \"div\", 13);\n        i0.ɵɵelementStart(32, \"div\", 8)(33, \"button\", 14);\n        i0.ɵɵtemplate(34, NewEmployeeModalComponent_span_34_Template, 2, 0, \"span\", 15);\n        i0.ɵɵtemplate(35, NewEmployeeModalComponent_img_35_Template, 1, 1, \"img\", 16);\n        i0.ɵɵelementEnd()()()()();\n      }\n\n      if (rf & 2) {\n        i0.ɵɵadvance(9);\n        i0.ɵɵproperty(\"ngModel\", ctx.employee.firstName);\n        i0.ɵɵadvance(4);\n        i0.ɵɵproperty(\"ngModel\", ctx.employee.lastName);\n        i0.ɵɵadvance(4);\n        i0.ɵɵproperty(\"ngModel\", ctx.employee.username);\n        i0.ɵɵadvance(4);\n        i0.ɵɵproperty(\"ngModel\", ctx.employee.email);\n        i0.ɵɵadvance(4);\n        i0.ɵɵproperty(\"ngModel\", ctx.employee.phoneNumber);\n        i0.ɵɵadvance(4);\n        i0.ɵɵproperty(\"ngModel\", ctx.employee.password);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngIf\", i0.ɵɵpureFunction2(11, _c0, ctx.EmployeeRole.BRANCH_EMPLOYEE, ctx.EmployeeRole.ADMIN).includes(ctx.currentEmployee.role));\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngIf\", i0.ɵɵpureFunction2(14, _c0, ctx.EmployeeRole.BRANCH_EMPLOYEE, ctx.EmployeeRole.DRIVER).includes(ctx.employee.role));\n        i0.ɵɵadvance(2);\n        i0.ɵɵproperty(\"disabled\", ctx.isStoreLoading);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngIf\", !ctx.isStoreLoading);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngIf\", ctx.isStoreLoading);\n      }\n    },\n    dependencies: [i5.NgForOf, i5.NgIf, i6.ɵNgNoValidate, i6.NgSelectOption, i6.ɵNgSelectMultipleOption, i6.DefaultValueAccessor, i6.SelectControlValueAccessor, i6.NgControlStatus, i6.NgControlStatusGroup, i6.RequiredValidator, i6.NgModel, i6.NgForm]\n  });\n  return NewEmployeeModalComponent;\n})();","map":null,"metadata":{},"sourceType":"module"}